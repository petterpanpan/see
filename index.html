<!DOCTYPE html>
<html lang="zh">

<head>
    import org.apache.http.HttpEntity;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;  
 private static final String BASE_URL = "https://www.baidu.com/s?wd=site:";   

    /**
     * 查询网址是否被收录
     */

 public Object getIncluded(String url) {
        Map<String,Object> map = new HashMap<String, Object>();
        boolean a = true;
        a = true;
        while (a) {
            String data = this.html(url);
            if(data.length()<2000){
                System.out.println(data);
                try {
                    Thread.sleep(100);

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }else{
            //找到相关结果数约
            String startLabel = "<span class=\"nums_text\">";
            String endLabel = "</span>";
            int start = data.indexOf(startLabel)+startLabel.length();
            int end =  data.indexOf(endLabel,start);
            String Result = data.substring(start, end);

            String str = Result;
            str=str.trim();
            String str2="";
            if(str != null && !"".equals(str)){
                for(int i=0;i<str.length();i++){
                    if(str.charAt(i)>=48 && str.charAt(i)<=57){
                        str2+=str.charAt(i);
                    }
                }
            }
            map.put("number", str2);
            if("0".equals(str2)){map.put("type",false);}else{map.put("type",true);}
            a=false;
            }
        }
        return map;
    }

 

/**
     * 请求百度搜索结果页，并返回html源码
     */
    private String html(String keywords) {
        String html = null;
        try {
            String url = BASE_URL + keywords;
            CloseableHttpClient client = HttpClients.createDefault();
            HttpGet get = new HttpGet(url);
            try {
                get.addHeader("Accept-Language","*,*;q=0.9,zh-TW;q=0.9");
                get.addHeader("User-Agent", "Chrome/77.0.3865.120 Safari/537.36");
                CloseableHttpResponse response = client.execute(get);
                HttpEntity entity = response.getEntity();
                if (entity != null) {
                    html = EntityUtils.toString(entity);
                }
                EntityUtils.consume(entity);
            } catch (IOException e) {
                e.printStackTrace();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return html;
    }
    server {

    listen 80;

    server_name www.ostay.cn;

    root /data/html/app;

    index  index.html index.htm;

    set $seo 0;
    if ($http_user_agent ~* "baiduspider|360Spider|HaoSouSpider|Googlebot|YoudaoBot|twitterbot|facebookexternalhit|rogerbot|linkedinbot|embedly|quora link preview|showyoubot|outbrain|pinterest|slackbot|vkShare|W3C_Validator|Bingbot|BingPreview|Sogou web spider|Sogou inst spider|YisouSpider") {
        set $seo 1;
    }
    if ($args ~ "_escaped_fragment_") {
        set $seo 1;
    }

    if ($uri ~ "\.(js|css|xml|less|png|jpg|jpeg|gif|pdf|doc|txt|ico|rss|zip|mp3|rar|exe|wmv|doc|avi|ppt|mpg|mpeg|tif|wav|mov|psd|ai|xls|mp4|m4a|swf|dat|dmg|iso|flv|m4v|torrent|ttf|woff)") {
        set $seo 0;
    }
    location / {
        #add_header seo $seo; for test
        if ($seo = 1) {
            # rewrite .* http://localhost:9999;
            proxy_pass http://seo.arvix.cn;
        }
   }
}<meta name="fragment" content="!"> 
    
    <link rel="shortcut icon" href="./assets/images/favicon.png">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?c05bb16ea908292af9f6c513087a1cc3";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8550836177608334",
        enable_page_level_ads: true
    });
    </script>
    <meta charset="UTF-8">
    <title>WebStack.cc - 设计师网址导航</title>
    <script>
    if (navigator.appName == "Netscape") {
        var language = navigator.language;
    } else {
        var language = navigator.browserLanguage;

    }

    if (language.indexOf("en") > -1) {
        document.location.href = "en/index.html";
    } else if (language.indexOf("zh") > -1) {
        document.location.href = "cn/index.html";
    } else {
        document.location.href = "en/index.html";

    }
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="viggo" />
    <title>WebStack.cc - Collection of resources and tools for Designers</title>
    <meta name="keywords" content="UI设计,UI设计素材,设计导航,网址导航,设计资源,创意导航,创意网站导航,设计师网址大全,设计素材大全,设计师导航,UI设计资源,优秀UI设计欣赏,设计师导航,设计师网址大全,设计师网址导航,产品经理网址导航,UX师网址导航,www.webstack.cc">
    <meta name="description" content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、Resources网站，定时更新分享优质产品设计书签。www.webstack.cc">
    
    <!-- / FB Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.webstack.cc/">
    <meta property="og:title" content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、Resources网站，定时更新分享优质产品设计书签。www.webstack.cc">
    <meta property="og:description" content="UI设计,UI设计素材,设计导航,网址导航,设计资源,创意导航,创意网站导航,设计师网址大全,设计素材大全,设计师导航,UI设计资源,优秀UI设计欣赏,设计师导航,设计师网址大全,设计师网址导航,产品经理网址导航,UX师网址导航,www.webstack.cc">
    <meta property="og:image" content="http://www.webstack.cc/assets/images/webstack_banner_cn.png">
    <meta property="og:site_name" content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、Resources网站，定时更新分享优质产品设计书签。www.webstack.cc">
    <!-- / Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="WebStack - 收集国内外优秀设计网站、UI设计资源网站、灵感创意网站、Resources网站，定时更新分享优质产品设计书签。www.webstack.cc">
    <meta name="twitter:description" content="UI设计,UI设计素材,设计导航,网址导航,设计资源,创意导航,创意网站导航,设计师网址大全,设计素材大全,设计师导航,UI设计资源,优秀UI设计欣赏,设计师导航,设计师网址大全,设计师网址导航,产品经理网址导航,UX师网址导航,www.webstack.cc">
    <meta name="twitter:image" content="http://www.webstack.cc/assets/images/webstack_banner_cn.png">
</head>

<body>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111463289-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-111463289-1');
    </script>
    
</body>

</html>
