function supportstorage(){return"object"==typeof window.localStorage}function handleSaveLayout1(){var t=$(".visual-right").html();stopsave||t==window.demoHtml||(stopsave++,window.demoHtml=t,saveLayout1(),stopsave--)}function handleSaveLayout(){var t=$(".visual-right").html();t!=window.demoHtml&&(saveLayout(),window.demoHtml=t)}var layouthistory;function saveLayout1(){var t=layouthistory;if(t||(t={count:0,list:[]}),t.list.length>t.count)for(i=t.count;i<t.list.length;i++)t.list[i]=null;t.list[t.count]=window.demoHtml,t.count++,supportstorage()&&localStorage.setItem("layoutdata",JSON.stringify(t)),layouthistory=t}function handleJsIds(){handleModalIds(),handleAccordionIds(),handleCarouselIds(),handleTabsIds()}function handleJsClass(t,a){div=$(t.target).find(".view>div"),div.each(function(){$(this).removeClass(function(t,a){arr=a.split(" ");var e="";for(key in arr){/^layout_\d+$/gi.test(arr[key])&&(e+=arr[key]+" ")}return e});var t=randomNumber();$(this).addClass("layout_"+t)})}function handleAccordionIds(){var e,t=$(".visual-right #myAccordion"),o="panel-"+randomNumber();t.attr("id",o),t.find(".panel").each(function(t,a){e="panel-element-"+randomNumber(),$(a).find(".panel-title").each(function(t,a){$(a).attr("data-parent","#"+o),$(a).attr("href","#"+e)}),$(a).find(".panel-collapse").each(function(t,a){$(a).attr("id",e)})})}function handleCarouselIds(){var t=$(".visual-right #myCarousel"),e="carousel-"+randomNumber();t.attr("id",e),t.find(".carousel-indicators li").each(function(t,a){$(a).attr("data-target","#"+e)}),t.find(".left").attr("href","#"+e),t.find(".right").attr("href","#"+e)}function handleModalIds(){var t=$(".visual-right #myModalLink"),a=randomNumber(),e="modal-container-"+a,o="modal-"+a;t.attr("id",o),t.attr("href","#"+e),t.next().attr("id",e)}function handleTabsIds(){var t=$(".visual-right #myTabs"),a="tabs-"+randomNumber();t.attr("id",a),t.find(".tab-pane").each(function(t,a){var e=$(a).attr("id"),o="panel-"+randomNumber();$(a).attr("id",o),$(a).parent().parent().find("a[href=#"+e+"]").attr("href","#"+o)})}function randomNumber(){return randomFromInterval(1,1e6)}function randomFromInterval(t,a){return Math.floor(Math.random()*(a-t+1)+t)}function gridSystemGenerator(){$(".lyrow .preview input").bind("keyup",function(){var e=0,o="",n=!1,t=$(this).val().split(" ",12);$.each(t,function(t,a){n||(parseInt(a)<=0&&(n=!0),e+=parseInt(a),o+='<div class="col-md-'+a+' column"></div>')}),12!=e||n?$(this).parent().prev().hide():($(this).parent().next().children().html(o),$(this).parent().prev().show())})}function configurationElm(t,a){$(".visual-right").delegate(".configuration > a","click",function(t){t.preventDefault();var a=$(this).parent().next().next().children();$(this).toggleClass("active"),a.toggleClass($(this).attr("rel"))}),$(".visual-right").delegate(".configuration .dropdown-menu a","click",function(t){t.preventDefault();var a=$(this).parent().parent(),e=a.parent().parent().next().next().children();a.find("li").removeClass("active"),$(this).parent().addClass("active");var o="";a.find("a").each(function(){o+=$(this).attr("rel")+" "}),a.parent().removeClass("open"),e.removeClass(o),e.addClass($(this).attr("rel"))})}function clearDemo(){$(".visual-right").empty(),layouthistory=null,supportstorage()&&localStorage.removeItem("layoutdata")}function removeMenuClasses(){$("#menu-layoutit li button").removeClass("active")}function changeStructure(t,a){$("#download-layout ."+t).removeClass(t).addClass(a)}function cleanHtml(t){$(t).parent().append($(t).children().html())}function downloadLayoutSrc(){formatSrc=getLayoutSrc(),$("#download-layout").html(formatSrc),$("#downloadModal textarea").empty(),$("#downloadModal textarea").val(formatSrc)}function undoLayout(){var t=layouthistory;return!!t&&(!(t.count<2)&&(window.demoHtml=t.list[t.count-2],t.count--,$(".visual-right").html(window.demoHtml),supportstorage()&&localStorage.setItem("layoutdata",JSON.stringify(t)),!0))}function redoLayout(){var t=layouthistory;return!(!t||!t.list[t.count])&&(window.demoHtml=t.list[t.count],t.count++,$(".visual-right").html(window.demoHtml),supportstorage()&&localStorage.setItem("layoutdata",JSON.stringify(t)),!0)}function ReplaceAll(t,a,e){for(;0<=t.indexOf(a);)t=t.replace(a,e);return t}function getLayoutSrc(){$("#download-layout").children().html($(".visual-right").html());var t=$("#download-layout").children();return t.find(".tag").each(function(t){$(this).html($(this).find(".tagname").html())}),t.find(".view .nav").each(function(t){$(this).replaceWith("{"+$(this).attr("rel")+"}")}),t.find(".view .visua-code-show").each(function(t){code=$(this).siblings(".visua-code").html(),$(this).siblings(".visua-code").remove(),$(this).replaceWith(code)}),t.find(".view .custtag").each(function(t){$(this).replaceWith("{"+$(this).attr("rel")+"}")}),t.find(".view .viewarea").each(function(t){code=$(this).siblings(".codearea").html(),code=ReplaceAll(code,"#[#","{"),code=ReplaceAll(code,"#]#","}"),$(this).siblings(".codearea").remove(),$(this).replaceWith(code)}),t.find(".preview, .configuration, .drag, .remove,.edit").remove(),t.find(".lyrow").addClass("removeClean"),t.find(".box-element").addClass("removeClean"),t.find(".lyrow .lyrow .lyrow .lyrow .lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)}),t.find(".lyrow .lyrow .lyrow .lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)}),t.find(".lyrow .lyrow .lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)}),t.find(".lyrow .lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)}),t.find(".lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)}),t.find(".lyrow .lyrow .removeClean").each(function(){cleanHtml(this)}),t.find(".lyrow .removeClean").each(function(){cleanHtml(this)}),t.find(".removeClean").each(function(){cleanHtml(this)}),t.find(".removeClean").remove(),$("#download-layout .column").removeClass("ui-sortable"),$("#download-layout .row-fluid").removeClass("clearfix").children().removeClass("column"),0<$("#download-layout .container").length&&changeStructure("row-fluid","row"),formatSrc=$.htmlClean($("#download-layout").html(),{format:!0,allowedAttributes:[["id"],["preload"],["target"],["width"],["height"],["style"],["face"],["src"],["autoplay"],["controls"],["color"],["size"],["class"],["data-toggle"],["data-target"],["data-parent"],["role"],["data-dismiss"],["aria-labelledby"],["aria-hidden"],["data-slide-to"],["data-slide"],["data-src"],["data-sub-html"],["data-ride"],["data-sub-html"],["role"],["aria-hidden"],["onerror"],["href"],["center"],["aria-expanded"],["script"],["link"]]}),formatSrc=formatSrc.replace(/\(&quot;/g,"('"),formatSrc=formatSrc.replace(/&quot;\)/g,"')"),formatSrc}var currentDocument=null,timerSave=2e3,stopsave=0,startdrag=0,demoHtml=$(".visual-right").html();function restoreData(){return!1}function initContainer(){$(".visual-right, .visual-right .column").sortable({connectWith:".column",opacity:.35,handle:".drag",start:function(t,a){startdrag||stopsave++,startdrag=1},stop:function(t,a){0<stopsave&&stopsave--,startdrag=0}}),configurationElm()}$(window).resize(function(){$("body").css("min-height",$(window).height()-90),$(".visual-right").css("min-height",$(window).height()-160)}),$(document).ready(function(){restoreData(),$("body").css("min-height",$(window).height()-90),$(".visual-right").css("min-height",$(window).height()-160),$(".visual-right, .visual-right .column").sortable({connectWith:".column",opacity:.35,handle:".drag"}),$(".visual-left .lyrow").draggable({connectToSortable:".visual-right",helper:"clone",handle:".drag",start:function(t,a){handleJsClass(t,a),startdrag||stopsave++,startdrag=1},drag:function(t,a){a.helper.width(400)},stop:function(t,a){$(".visual-right .column").sortable({opacity:.35,connectWith:".column",start:function(t,a){startdrag||stopsave++,startdrag=1},stop:function(t,a){0<stopsave&&stopsave--,startdrag=0}}),0<stopsave&&stopsave--,startdrag=0}}),$(".visual-left .box").draggable({connectToSortable:".column",helper:"clone",handle:".drag",start:function(t,a){startdrag||stopsave++,startdrag=1},drag:function(t,a){a.helper.width(400)},stop:function(){handleJsIds(),0<stopsave&&stopsave--,startdrag=0}}),initContainer(),$("[data-target='#downloadModal']").click(function(t){t.preventDefault(),downloadLayoutSrc()}),$("#download").click(function(){return downloadLayout(),!1}),$("#downloadhtml").click(function(){return downloadHtmlLayout(),!1}),$("#edit").click(function(){return $("body").removeClass("devpreview sourcepreview"),$("body").addClass("edit"),removeMenuClasses(),$(this).addClass("active"),!1}),$("#clear").click(function(t){t.preventDefault(),clearDemo()}),$("#devpreview").click(function(){return $("body").removeClass("edit sourcepreview"),$("body").addClass("devpreview"),removeMenuClasses(),$(this).addClass("active"),!1}),$("#sourcepreview").click(function(){return $("body").removeClass("edit"),$("body").addClass("devpreview sourcepreview"),removeMenuClasses(),$(this).addClass("active"),!1}),$(".nav-header").click(function(){$(".visual-left .boxes, .visual-left .rows").hide(),$(this).next().slideDown()}),configurationElm(),gridSystemGenerator(),setInterval(function(){handleSaveLayout1()},timerSave),$("#undo").click(function(){stopsave++,undoLayout()&&initContainer(),stopsave--}),$("#redo").click(function(){stopsave++,redoLayout()&&initContainer(),stopsave--})});